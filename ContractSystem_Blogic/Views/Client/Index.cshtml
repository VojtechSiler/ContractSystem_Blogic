@using ContractSystem_Blogic.Models
@model List<Client>
@{
}

<h2 style="color:orangered">Client Database</h2>

<div class="row justify-content-between">
    <div class="col-lg-6 my-2">
        @Html.Partial("_SearchPartial")

    </div>
    <div class="col-lg-4 d-flex flex-row-reverse my-2">
        <a asp-action="CreateClient" class="btn btn-orange col-5"><i class="fa-solid fa-plus"></i> New Client</a>
        <a asp-action="ExportClientsToCSV" class="btn btn-orange-two col-3"><i class="fa-solid fa-file-export"></i> Export</a>
    </div>
</div>


<div>
    <table class="table table-striped border">
        <tr class="table-responsive">
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone Number</th>
            <th>ID</th>
            <th>Age</th>
            <th></th>
            
        </tr>
        @foreach (var client in Model)
        {
            <tr class="tr-clients" onclick="location.href='@Url.Action("ClientDetail", "Client", new { clientId = client.Id })';">
                <td>
                    @client.FirstName
                </td>
                <td>
                    @client.LastName
                </td>
                <td>
                    @client.Email
                </td>
                <td>
                    @client.PhoneNumber
                </td>
                <td>
                    @client.IdentificationNumber
                </td>
                <td>
                    @client.Age
                <td>
                </td>
                
                </td>
            </tr>
        }
    </table>
</div>

<script>
    // Get all the table rows
    var rows = document.querySelectorAll("tr");

    // Attach a click event handler to each row
    rows.forEach(function (row) {
        row.addEventListener("click", function () {
            // Get the URL from the data attribute and redirect
            var url = this.getAttribute("data-url");
            if (url) {
                location.href = url;
            }
        });
    });
</script>
